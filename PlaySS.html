<head>
    <title>PlaySS</title>
    <!-- 从[˶˃ᴗ˂˵]从「覗かないで！エッチ！」 -->
</head>

<style type="text/css">
    /* .view_txt{
        position:absolute;
        width:100%;
        height: 100%;
    } */
    body{
        touch-action: manipulation;
    }
    label{
        color: black;
        background-color: gainsboro;
    }
    input[type="file"]{
        display: none;
    }
</style>

<body>
    <meta charset="UTF-8">

    <!-- <label>♪1<input type="file" value="♪1" id="" onclick="bgm1()" disabled></label> -->
    <label>img<input type="file" id="img_read" value="img" style="width: 5%; height: 5%; position: absolute; left: 2%; bottom: 2%;"></label>
    <label>bgm<input type="file" id="bgm_read" value="bgm" style="width: 5%; height: 5%; position: absolute; left: 10%; top: 2%;"></label>

    <!-- 背景画像 -->
    <img id="img_view">
    <!-- <div id="img_view"></div> -->

    <br>

    <input type="button" value="分離" style="font-size: 150%; width: 10%; height: 5%; position: absolute; right: 2%; bottom: 67%;" id="s_button" onclick="separate_txt()">

    <br>
    <input type="button" style="width: 20%; height: 5%; position: absolute; left: 9%; bottom: 74%;" value="jΣﾐｲ˶º - º˶ﾘ「・・・」" id="re_cha_button" onclick="re_cha()">

    <br><br>
    <form style="position: absolute; right: 2%; bottom: 72%">
    <input type="text" placeholder="キャラ名1" id="name1_textarea">
    <br>
    <input type="text" placeholder="一人称1" id="name1_one_textarea">
    <br>
    <input type="text" placeholder="二人称1" id="name1_two_textarea">
    <br>
    <input type="text" placeholder="呼ばれ方1" id="name1_call_textarea">

    <br><br>
    
    <input type="text" placeholder="キャラ名2" id="name2_textarea">
    <br>
    <input type="text" placeholder="一人称2" id="name2_one_textarea">
    <br>
    <input type="text" placeholder="二人称2" id="name2_two_textarea">
    <br>
    <input type="text" placeholder="呼ばれ方2" id="name2_call_textarea">

    </form>
    <br>

    <!-- テキスト表示エリア -->
    <textarea style="width:77%; height:70%; font-size: 200%; position: absolute; left: 9%; bottom: 2%;
    background-color: rgba(256,256,256,0.7);" placeholder="SS貼り付け" spellcheck="true" id="view_txt"></textarea>

    <!-- 文字送り -->
    <!-- <form id="mess" style="vertical-align: top;"> -->
    <!-- </form> -->
    
    <!-- 縦横調整切り替え -->
    <input type="button" value="⇔⇕" id="hw_change_button" style="font-size: 150%; background-color: rgba(256,256,256,0.7); 
    width: 5%; height: 5%; position: absolute; left: 2%; bottom: 17%;" onclick="hw_change()">
    <br>

    <input type="button" value="△" id="up" style="font-size: 150%; background-color: rgba(256,256,256,0.7); 
    width: 10%; height: 9%; position: absolute; right: 2%; bottom: 13%;" onclick="up_txt()">
    <br>
    <input type="button" value="▽" id="down" style="font-size: 150%; background-color: rgba(256,256,256,0.7); 
    width: 10%; height:9%; position: absolute; right: 2%; bottom: 2%;" onclick="down_txt()">
       

</body>



<script>

//キャラクターデータ
var cha_data = [
        ["予備1","予備2","予備3","予備4","予備5","予備6","予備7","予備8","一人称","二人称","グループ名","名前","パターン1","パターン2","パターン3","パターン4"],
        ["","","","","","","","","わたし","あなた","μ's","穂乃果","リ`・ヮ・)","リ´＾ヮ＾)","リ｀・-・) ",""],
        ["","","","","","","","","わたし","あなた","μ's","絵里","∬cVσ_σv","","",""],
        ["","","","","","","","","わたし、ことり","あなた","μ's","ことり","(・8・)","(＾8＾)","9cﾊσ ᴗσﾘ",""],
        ["","","","","","","","","わたし","あなた","μ's","海未","/cVσ_VσV","/cV ;σ_VσV","",""],
        ["","","","","","","","","凛","ー","μ's","凛","＞ω＜/","ネッコ","",""],
        ["","","","","","","","","わたし","あなた","μ's","真姫","从廿_廿从","まきちゃん","",""],
        ["","","","","","","","","ウチ","あなた","μ's","希","╭*(๑˘ᴗ˘๑)*╮","","",""],
        ["","","","","","","","","わたし","あなた","μ's","花陽","从*´ ヮ`ﾙ","ｲw´ヮ`)ﾊ","",""],
        ["","","","","","","","","わたし、にこ","アンタ、あなた","μ's","にこ","J(*‘ヮ‘*)し","","",""],
        ["","","","","","","","","わたし","あなた","Aqours","千歌","从c*・ヮ・§","从c^ヮ^§","从c*˘･з･˘§",""],
        ["","","","","","","","","わたし","あなた","Aqours","梨子","ﾒｲ*σ _ σﾘ","ﾒｲ*,> _ <,ﾘ","ﾒﾉ＾ﾉ｡ ＾ﾘ",""],
        ["","","","","","","","","わたし","キミ","Aqours","果南","∫∫( c||^ヮ^||","∫∫( c||#^ヮ^||","∫∫( c||•ヮ•||",""],
        ["","","","","","","","","わたくし","あなた","Aqours","ダイヤ","|c||^.- ^||","|c||´.-｀||","|c||;　ﾛ　||　゜.゜",""],
        ["","","","","","","","","わたし","キミ","Aqours","曜","(*> ᴗ •*)ゞ","(*> ᴗ ;*)ゞ","ﾒﾒ´- ﾝﾄ",""],
        ["","","","","","","","","わたし、ヨハネ","アンタ、あなた","Aqours","善子","`¶cﾘ˘ヮ˚)|","●","`¶cﾘ˘～˚)",""],
        ["","","","","","","","","マル","ー","Aqours","花丸","ﾉcﾉ,,･o･,,ﾉﾚ","ﾉcﾉ,,･ᴗ･,,ﾉﾚ","ﾉcﾉ,,｀o´,,ﾉﾚ",""],
        ["","","","","","","","","わたし、マリー","あなた","Aqours","鞠莉","ﾉξｿ´・ω・`ﾊ6","ﾉξｿ´；ω；`ﾊ6","",""],
        ["","","","","","","","","ルビィ","ー","Aqours","ルビィ","⌒°( ･ω･)°⌒","⌒°( ^ω^)°⌒","⌒°(#･ω･)°⌒",""],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","歩夢","@cﾒ*˶ˆ ᴗ ˆ˵ﾘ","@cﾒ*˘ ᴗ ˘ﾘ","@cﾒ*◉ _ ◉ ﾘ","₍₍ @cﾒ*˶ˆ ᴗ ˆ˵ 三*˶ˆ ᴗ ˆ˵ﾘ ⁾⁾ "],
        ["","","","","","","","","かすみん、わたし","ー","虹ヶ咲","かすみ","从cι˘σ ᴗ σ˘*","从cι˘σ □ σ˘*","从cι˘＞ □ ＜˘*",""],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","しずく","jΣﾐｲ˶º ᴗº˶ﾘ","jΣﾐｲ˶º - º˶ﾘ","jΣﾐｲ˶º ^º˶ﾘ",""],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","果林","(ζﾙ ˘ ᴗ ˚ ﾙﾍ","(ζﾙ|˘ᴗ°ﾙ","八丈島",""],
        ["","","","","","","","","愛さん、アタシ","キミ、アンタ","虹ヶ咲","愛","ζ㎗òヮóﾘ","ζ㎗Ō ᴗ Ōﾘ","",""],
        ["","","","","","","","","彼方ちゃん、私","あなた","虹ヶ咲","彼方","ﾉﾚcｲ´=ω=)","ﾉﾚcｲ* ¯ ꒳¯*)","",""],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","せつ菜","⁄/*ｲ`＾ᗜ＾ﾘ","⁄/*ｲ`>ヮ<ﾘ","╭(^O^)",""],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","エマ","╰*(..•ヮ•.. ) *╯",",,(d!.•ヮ•..)",",,(d!.˘ ヮ ˘..)","スイス"],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","璃奈","从[˶˃ᴗ˂˵]从","从[´・֊・]从","从´・֊[ >ᴗ<]",""],
        ["","","","","","","","","私","あなた","虹ヶ咲","栞子","ᶘｲ^⇁^ﾅ川","ᶘｲ˘⇁˘ﾅ川","",""],
        ["","","","","","","","","ボク","キミ","虹ヶ咲","ミア","ζ ﾉᴗ ˘´Y","ζ ﾉ､ ˘´Y ","ｲdﾉﾉ . τlﾉ",""],
        ["","","","","","","","","ランジュ、アタシ","アナタ","虹ヶ咲","嵐珠","ʃcʃ|.ò ᴗ ó)ʅ","ʃcʃ|.Ō ᴗ Ō)ʅ","ランジュ","ዖ⦇d ò ヮ óﾘየ"],
        ["","","","","","","","","わたし","あなた","虹ヶ咲","侑","⎛(cV„Ò ᴗ ÓV⎞","⎛(cV„Ō ᴗ ŌV⎞","⎛(cV„Ó ᴗ ÒV⎞","⎛(cV„◜ᴗ◝V⎞"],
        ["","","","","","","","","わたし","ー","Liella!","かのん","ﾉcﾉﾉσﾉᴗ σb","|c||σノヮσ||","/ﾙcﾉº'ᴗº)",""],
        ["","","","","","","","","可可","ー","Liella!","可可","6cƠᴗƠ∂","クゥクゥ","",""],
        ["","","","","","","","","わたし","ー","Liella!","千砂都","၄(cʸ„ò ᴗ óﾘ၃",",O(d,,O ᴗ O,,)O、","",""],
        ["","","","","","","","","わたし","ー","Liella!","すみれ","/㍵ƺ˚ヮˆ)ƺ","","",""],
        ["","","","","","","","","わたくし","ー","Liella!","恋","ʃt(c◜・ᴗ・)","⌠t(cｲ´A`Y","",""],
        ["","","","","","","","","きな子","ー","Liella!","きな子","╭∞( ' ᗜ ' )∞╮","","",""],
        ["","","","","","","","","私","ー","Liella!","メイ","(cࡘ„ò ωò*ᘔ","","",""],
        ["","","","","","","","","私","ー","Liella!","四季","(.ɖ¡/ơ . ơy","","",""],
        ["","","","","","","","","私","ー","Liella!","夏美","§ ˘σ ᴗ σ˘§","§ σ ﹏σ§","CEO",""],
        ["","","","","","","","","わたし","あなた","Liella!","ウィーン","","","",""],
        ["","","","","","","","","わたし","ー","Liella!","冬毬","","","",""],
        ["","","","","","","","","アタシ","あなた","蓮ノ空","花帆","","","",""],
        ["","","","","","","","","わたし","ー","蓮ノ空","さやか","","","",""],
        ["","","","","","","","","私","あなた","蓮ノ空","梢","","","",""],
        ["","","","","","","","","ボク","ー","蓮ノ空","綴理","","","",""],
        ["","","","","","","","","ルリ","ー","蓮ノ空","瑠璃乃","","","",""],
        ["","","","","","","","","私","ー","蓮ノ空","慈","","","",""],
        ["","","","","","","","","私","ー","その他","ツバサ","从σ ᴗ σ从","","",""],
        ["","","","","","","","","","","その他","英玲奈","ﾉqｲ`σﾉ_σ.ｱ","ロボ","",""],
        ["","","","","","","","","","","その他","あんじゅ","ﾉ(δ . δ,,ﾌﾉし","フルハウス","",""],
        ["","","","","","","","","","","その他","聖良","(q|`˘ ᴗ˘)ʅʅ","（q|˘・ᴗ・˘)ʅʅ","⌒°(q|˶^ ᴗ^˶)°⌒",""],
        ["","","","","","","","","","","その他","理亞","ﾉJ(´σ_ σ`ﾘﾉし","","",""],
        ["","","","","","","","","","","その他","遥","ζ(*^ᴗ^*)ζ","","",""],
        ["","","","","","","","","","","その他","美里","","","",""],
        ["","","","","","","","","","","その他","摩央","","","",""],
        ["","","","","","","","","","","その他","悠奈","( ᐛ👐)","","",""],
        ["","","","","","","","","","","その他","？？？","(Ｕ╯ꈊ╰Ｕ)","/cVσ 8 σV","",""]
      ]

      //呼び名データ
      var call_data = [
        ["","","呼ばれる人物","呼ばれ方","呼ぶ人物1","呼ぶ人物2","呼ぶ人物3","呼ぶ人物4","呼ぶ人物5","呼ぶ人物6","呼ぶ人物7","呼ぶ人物8","呼ぶ人物9","呼ぶ人物10","呼ぶ人物11","呼ぶ人物12","呼ぶ人物13","呼ぶ人物14","呼ぶ人物15","呼ぶ人物16","呼ぶ人物17","呼ぶ人物18"],
        ["","","歩夢","歩夢ちゃん","穂乃果","ことり","希","千歌","曜","梨子","果南","彼方","エマ","","","","","","","","",""],
        ["","","歩夢","歩夢さん","凛","花陽","花丸","ルビィ","ダイヤ","せつ菜","璃奈","しずく","栞子","","","","","","","","",""],
        ["","","歩夢","歩夢先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","歩夢","歩夢","侑","海未","真姫","にこ","絵里","善子","鞠莉","愛","果林","ミア","嵐珠","","","","","","",""],
        ["","","かすみ","かすみちゃん","穂乃果","ことり","花陽","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","璃奈","彼方","エマ","果林","侑","","",""],
        ["","","かすみ","かすみさん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","かすみ","かすかすちゃん","果林","","","","","","","","","","","","","","","","",""],
        ["","","かすみ","かすかすさん","せつ菜","","","","","","","","","","","","","","","","",""],
        ["","","かすみ","子犬ちゃん","ミア","","","","","","","","","","","","","","","","",""],
        ["","","かすみ","かすかす","善子","愛","璃奈","彼方","","","","","","","","","","","","","",""],
        ["","","かすみ","かすみん","凛","希","愛","かすみ","","","","","","","","","","","","","",""],
        ["","","かすみ","かすみ","海未","真姫","にこ","絵里","善子","鞠莉","嵐珠","ミア","","","","","","","","","",""],
        ["","","しずく","しずくちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","璃奈","彼方","エマ","果林","侑",""],
        ["","","しずく","しずくさん","ダイヤ","せつ菜","栞子","","","","","","","","","","","","","","",""],
        ["","","しずく","しず子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","しずく","しずく","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","果林","果林ちゃん","希","果南","彼方","エマ","","","","","","","","","","","","","",""],
        ["","","果林","果林さん","穂乃果","ことり","凛","花陽","千歌","曜","梨子","花丸","ルビィ","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","",""],
        ["","","果林","果林先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","果林","カリン","愛","","","","","","","","","","","","","","","","",""],
        ["","","果林","果林","海未","真姫","にこ","絵里","善子","鞠莉","嵐珠","ミア","","","","","","","","","",""],
        ["","","愛","愛ちゃん","穂乃果","ことり","希","千歌","曜","梨子","果南","歩夢","彼方","エマ","侑","美里","","","","","",""],
        ["","","愛","愛さん","凛","花陽","花丸","ルビィ","ダイヤ","愛","せつ菜","璃奈","しずく","栞子","","","","","","","",""],
        ["","","愛","愛先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","愛","愛","海未","真姫","にこ","絵里","善子","鞠莉","果林","嵐珠","ミア","","","","","","","","",""],
        ["","","美里","おねーちゃん","愛","","","","","","","","","","","","","","","","",""],
        ["","","彼方","彼方ちゃん","果南","エマ","彼方","","","","","","","","","","","","","","",""],
        ["","","彼方","彼方さん","穂乃果","ことり","凛","花陽","千歌","曜","梨子","花丸","ルビィ","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","",""],
        ["","","彼方","彼方先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","彼方","カナちゃん","希","愛","","","","","","","","","","","","","","","",""],
        ["","","彼方","彼方","海未","真姫","にこ","絵里","善子","鞠莉","果林","嵐珠","ミア","","","","","","","","",""],
        ["","","彼方","お姉ちゃん","遥","","","","","","","","","","","","","","","","",""],
        ["","","せつ菜","せつ菜ちゃん","穂乃果","ことり","希","千歌","曜","梨子","果南","歩夢","彼方","エマ","侑","","","","","","",""],
        ["","","せつ菜","せつ菜さん","凛","花陽","花丸","ルビィ","ダイヤ","璃奈","しずく","栞子","","","","","","","","","",""],
        ["","","せつ菜","せつ菜先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","せつ菜","せっちゃん","鞠莉","","","","","","","","","","","","","","","","",""],
        ["","","せつ菜","せっつー","愛","","","","","","","","","","","","","","","","",""],
        ["","","せつ菜","せつ菜","海未","真姫","にこ","絵里","善子","果林","嵐珠","ミア","","","","","","","","","",""],
        ["","","エマ","エマちゃん","東條希","果南","彼方","","","","","","","","","","","","","","",""],
        ["","","エマ","エマさん","穂乃果","ことり","凛","花陽","千歌","曜","梨子","花丸","ルビィ","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","",""],
        ["","","エマ","エマっち","愛","","","","","","","","","","","","","","","","",""],
        ["","","エマ","エマ先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","エマ","エマ","海未","真姫","にこ","絵里","善子","鞠莉","果林","嵐珠","ミア","","","","","","","","",""],
        ["","","璃奈","璃奈ちゃん","穂乃果","ことり","凛","花陽","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","彼方","エマ","果林","侑","","",""],
        ["","","璃奈","璃奈さん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","璃奈","りなっち","希","","","","","","","","","","","","","","","","",""],
        ["","","璃奈","りなりー","愛","","","","","","","","","","","","","","","","",""],
        ["","","璃奈","りな子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","璃奈","璃奈","海未","真姫","にこ","絵里","善子","鞠莉","嵐珠","ミア","","","","","","","","","",""],
        ["","","栞子","しおってぃー","愛","","","","","","","","","","","","","","","","",""],
        ["","","栞子","栞子ちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","璃奈","彼方","エマ","果林","侑",""],
        ["","","栞子","栞子さん","ダイヤ","せつ菜","しずく","","","","","","","","","","","","","","",""],
        ["","","栞子","しお子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","栞子","栞子","海未","真姫","にこ","絵里","善子","鞠莉","嵐珠","ミア","薫子","","","","","","","","",""],
        ["","","ミア","ミアちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","璃奈","彼方","エマ","侑","",""],
        ["","","ミア","ミアさん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","ミア","ミア子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","ミア","ミアチ ","愛","","","","","","","","","","","","","","","","",""],
        ["","","ミア","ミア","海未","真姫","にこ","絵里","善子","鞠莉","愛","果林","嵐珠","","","","","","","","",""],
        ["","","嵐珠","ランジュ先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","嵐珠","ショウ・ランジュ","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","嵐珠","ランジュちゃん","穂乃果","ことり","希","千歌","曜","梨子","果南","歩夢","彼方","エマ","侑","","","","","","",""],
        ["","","嵐珠","ランジュさん","凛","花陽","花丸","ルビィ","ダイヤ","せつ菜","璃奈","しずく","","","","","","","","","",""],
        ["","","嵐珠","ランジュ","海未","真姫","にこ","絵里","善子","鞠莉","愛","果林","栞子","ミア","ランジュ","","","","","","",""],
        ["","","侑","侑ちゃん","歩夢","彼方","エマ","","","","","","","","","","","","","","",""],
        ["","","侑","侑先輩","かすみ","しずく","","","","","","","","","","","","","","","",""],
        ["","","侑","侑さん","しずく","せつ菜","璃奈","栞子","","","","","","","","","","","","","",""],
        ["","","侑","ゆうゆ","愛","","","","","","","","","","","","","","","","",""],
        ["","","侑","ベイビーちゃん","ミア","","","","","","","","","","","","","","","","",""],
        ["","","侑","侑","果林","嵐珠","","","","","","","","","","","","","","","",""],
        ["","","千歌","千歌ちゃん","穂乃果","ことり","曜","梨子","歩夢","彼方","エマ","果林","侑","花丸","ルビィ","","","","","","",""],
        ["","","千歌","千歌先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","千歌","千歌さん","凛","花陽","ダイヤ","せつ菜","璃奈","しずく","栞子","","","","","","","","","","",""],
        ["","","千歌","チカッチ","希","鞠莉","愛","","","","","","","","","","","","","","",""],
        ["","","千歌","千歌","海未","真姫","にこ","絵里","善子","果南","嵐珠","ミア","志満","美渡","","","","","","","",""],
        ["","","梨子","梨子ちゃん","穂乃果","ことり","希","千歌","曜","花丸","ルビィ","果南","歩夢","彼方","エマ","果林","侑","","","","",""],
        ["","","梨子","梨子さん","凛","花陽","ダイヤ","せつ菜","しずく","璃奈","栞子","","","","","","","","","","",""],
        ["","","梨子","梨子先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","梨子","梨子","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","梨子","リリー","善子","","","","","","","","","","","","","","","","",""],
        ["","","果南","果南ちゃん","希","千歌","曜","梨子","花丸","ルビィ","彼方","エマ","果林","","","","","","","","",""],
        ["","","果南","果南先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","果南","果南さん","穂乃果","ことり","凛","花陽","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","","","","","","",""],
        ["","","果南","果南","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","ダイヤ","ダイヤちゃん","彼方","エマ","","","","","","","","","","","","","","","",""],
        ["","","ダイヤ","ダイヤさん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","花丸","歩夢","せつ菜","璃奈","しずく","栞子","果林","侑","",""],
        ["","","ダイヤ","ダイヤ先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","ダイヤ","お姉ちゃん","ルビィ","","","","","","","","","","","","","","","","",""],
        ["","","ダイヤ","ダイヤ","海未","真姫","にこ","絵里","善子","果南","鞠莉","愛","嵐珠","ミア","","","","","","","",""],
        ["","","曜","曜ちゃん","穂乃果","ことり","希","千歌","梨子","花丸","ルビィ","歩夢","彼方","エマ","果林","侑","","","","","",""],
        ["","","曜","曜さん","凛","花陽","ダイヤ","せつ菜","璃奈","しずく","栞子","","","","","","","","","","",""],
        ["","","曜","曜先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","曜","曜","海未","真姫","にこ","絵里","善子","果南","鞠莉","愛","嵐珠","ミア","","","","","","","",""],
        ["","","善子","善子ちゃん","花陽","歩夢","璃奈","彼方","エマ","穂乃果","ことり","凛","希","千歌","曜","梨子","花丸","ルビィ","果南","果林","侑",""],
        ["","","善子","善子さん","しずく","栞子","ダイヤ","せつ菜","","","","","","","","","","","","","",""],
        ["","","善子","善子","海未","真姫","にこ","絵里","鞠莉","愛","嵐珠","ミア","","","","","","","","","",""],
        ["","","善子","ヨハネちゃん","花陽","歩夢","璃奈","彼方","エマ","","","","","","","","","","","","",""],
        ["","","善子","ヨハネさん","しずく","栞子","","","","","","","","","","","","","","","",""],
        ["","","善子","ヨハ子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","花丸","ずら丸ちゃん","愛","","","","","","","","","","","","","","","","",""],
        ["","","花丸","ずら丸","善子","","","","","","","","","","","","","","","","",""],
        ["","","花丸","マル子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","花丸","花丸ちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","ルビィ","果南","歩夢","璃奈","彼方","エマ","果林","侑","",""],
        ["","","花丸","花丸さん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","花丸","花丸","海未","真姫","にこ","絵里","鞠莉","嵐珠","ミア","","","","","","","","","","",""],
        ["","","鞠莉","鞠莉ちゃん","希","千歌","曜","梨子","花丸","ルビィ","彼方","エマ","果林","","","","","","","","",""],
        ["","","鞠莉","鞠莉さん","穂乃果","ことり","凛","花陽","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","","","","","","",""],
        ["","","鞠莉","鞠莉先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","鞠莉","鞠莉","海未","真姫","にこ","絵里","善子","果南","嵐珠","ミア","","","","","","","","","",""],
        ["","","鞠莉","マリー","愛","","","","","","","","","","","","","","","","",""],
        ["","","ルビィ","ルビィちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","花丸","果南","歩夢","璃奈","彼方","エマ","果林","侑","",""],
        ["","","ルビィ","ルビィさん","せつ菜","しずく","栞子","","","","","","","","","","","","","","",""],
        ["","","ルビィ","ルビィ","海未","真姫","にこ","絵里","善子","ダイヤ","鞠莉","愛","嵐珠","ミア","","","","","","","",""],
        ["","","ルビィ","ルビ子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","穂乃果","穂乃果ちゃん","ことり","凛","花陽","希","千歌","曜","梨子","果南","歩夢","彼方","エマ","果林","侑","","","","",""],
        ["","","穂乃果","穂乃果さん","花丸","ルビィ","ダイヤ","せつ菜","璃奈","しずく","栞子","","","","","","","","","","",""],
        ["","","穂乃果","穂乃果先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","穂乃果","穂乃果","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","穂乃果","お姉ちゃん","雪穂","","","","","","","","","","","","","","","","",""],
        ["","","絵里","絵里ちゃん","穂乃果","ことり","凛","花陽","果南","彼方","エマ","果林","","","","","","","","","",""],
        ["","","絵里","絵里さん","千歌","曜","梨子","花丸","ルビィ","歩夢","せつ菜","璃奈","しずく","栞子","侑","ダイヤ","","","","","",""],
        ["","","絵里","絵里先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","絵里","絵里","海未","にこ","善子","嵐珠","鞠莉","","","","","","","","","","","","",""],
        ["","","絵里","エリーチカさん","ダイヤ","","","","","","","","","","","","","","","","",""],
        ["","","絵里","エリーチカ","鞠莉","","","","","","","","","","","","","","","","",""],
        ["","","絵里","エリー","真姫","愛","ミア","","","","","","","","","","","","","","",""],
        ["","","絵里","えりち","希","","","","","","","","","","","","","","","","",""],
        ["","","絵里","お姉ちゃん","亜里沙","","","","","","","","","","","","","","","","",""],
        ["","","ことり","ことりちゃん","穂乃果","凛","花陽","希","千歌","曜","梨子","果南","歩夢","彼方","エマ","果林","侑","","","","",""],
        ["","","ことり","ことりさん","花丸","ルビィ","ダイヤ","せつ菜","璃奈","しずく","栞子","","","","","","","","","","",""],
        ["","","ことり","ことり先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","ことり","ことり","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","ことり","ミナリンスキー","鞠莉","","","","","","","","","","","","","","","","",""],
        ["","","海未","海未ちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","果南","歩夢","彼方","エマ","果林","侑","","","",""],
        ["","","海未","海未さん","花丸","ルビィ","ダイヤ","せつ菜","璃奈","しずく","栞子","","","","","","","","","","",""],
        ["","","海未","海未先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","海未","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","","",""],
        ["","","凛","凛ちゃん","穂乃果","ことり","花陽","希","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","璃奈","彼方","エマ","果林","侑","",""],
        ["","","凛","凛さん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","凛","凛","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","凛","りん子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","真姫","真姫ちゃん","穂乃果","ことり","凛","花陽","希","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","璃奈","彼方","エマ","果林","侑","かすみ"],
        ["","","真姫","真姫さん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","真姫","真姫","海未","にこ","絵里","善子","鞠莉","嵐珠","ミア","","","","","","","","","","",""],
        ["","","真姫","まき子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","真姫","マッキー","愛","","","","","","","","","","","","","","","","",""],
        ["","","希","希ちゃん","穂乃果","ことり","凛","花陽","果南","彼方","エマ","果林","","","","","","","","","",""],
        ["","","希","希さん","千歌","曜","梨子","花丸","ルビィ","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","","","","","",""],
        ["","","希","希先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","希","希","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","花陽","花陽ちゃん","穂乃果","ことり","希","千歌","曜","梨子","花丸","ルビィ","果南","歩夢","かすみ","璃奈","彼方","エマ","果林","侑","",""],
        ["","","花陽","花陽さん","ダイヤ","せつ菜","しずく","栞子","","","","","","","","","","","","","",""],
        ["","","花陽","花陽","海未","真姫","にこ","絵里","善子","鞠莉","愛","嵐珠","ミア","","","","","","","","",""],
        ["","","花陽","かよ子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","花陽","はな子","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","花陽","かよちん","凛","","","","","","","","","","","","","","","","",""],
        ["","","にこ","にこちゃん","穂乃果","ことり","凛","花陽","真姫","果南","彼方","エマ","果林","","","","","","","","",""],
        ["","","にこ","にこさん","千歌","曜","梨子","花丸","ルビィ","ダイヤ","歩夢","せつ菜","璃奈","しずく","栞子","侑","","","","","",""],
        ["","","にこ","にこっち","希","鞠莉","愛","","","","","","","","","","","","","","",""],
        ["","","にこ","にこ先輩","かすみ","","","","","","","","","","","","","","","","",""],
        ["","","にこ","にこ","海未","絵里","善子","嵐珠","ミア","","","","","","","","","","","","",""],
        ["","","かのん","かのんちゃん","千砂都","","","","","","","","","","","","","","","","",""],
        ["","","かのん","かのんさん","恋","","","","","","","","","","","","","","","","",""],
        ["","","かのん","かのん先輩","きな子","メイ","四季","夏美","冬毬","","","","","","","","","","","","",""],
        ["","","かのん","かのん","可可","すみれ","","","","","","","","","","","","","","","",""],
        ["","","かのん","澁谷かのん","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","可可","可可ちゃん","かのん","千砂都","","","","","","","","","","","","","","","",""],
        ["","","可可","可可さん","恋","","","","","","","","","","","","","","","","",""],
        ["","","可可","可可先輩","きな子","メイ","四季","夏美","冬毬","","","","","","","","","","","","",""],
        ["","","可可","可可","可可","すみれ","","","","","","","","","","","","","","","",""],
        ["","","可可","唐可可","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","千砂都","ちぃちゃん","かのん","","","","","","","","","","","","","","","","",""],
        ["","","千砂都","千砂都さん","恋","","","","","","","","","","","","","","","","",""],
        ["","","千砂都","千砂都先輩","きな子","メイ","四季","夏美","冬毬","","","","","","","","","","","","",""],
        ["","","千砂都","千砂都","可可","すみれ","","","","","","","","","","","","","","","",""],
        ["","","千砂都","嵐千砂都","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","すみれ","すみれちゃん","かのん","千砂都","","","","","","","","","","","","","","","",""],
        ["","","すみれ","すみれさん","恋","","","","","","","","","","","","","","","","",""],
        ["","","すみれ","すみれ先輩","きな子","メイ","四季","夏美","冬毬","","","","","","","","","","","","",""],
        ["","","すみれ","すみれ","可可","","","","","","","","","","","","","","","","",""],
        ["","","すみれ","平安名すみれ","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","恋","恋先輩","きな子","メイ","四季","夏美","冬毬","","","","","","","","","","","","",""],
        ["","","恋","恋ちゃん","かのん","千砂都","","","","","","","","","","","","","","","",""],
        ["","","恋","レンレン","可可","","","","","","","","","","","","","","","","",""],
        ["","","恋","恋","すみれ","","","","","","","","","","","","","","","","",""],
        ["","","恋","葉月恋","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","きな子","きな子さん","恋","","","","","","","","","","","","","","","","",""],
        ["","","きな子","きな子ちゃん","かのん","千砂都","四季","","","","","","","","","","","","","","",""],
        ["","","きな子","きなきな","可可","","","","","","","","","","","","","","","","",""],
        ["","","きな子","きな子","すみれ","きな子","メイ","","","","","","","","","","","","","","",""],
        ["","","きな子","桜小路きな子","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","きな子","きな子先輩","冬毬","","","","","","","","","","","","","","","","",""],
        ["","","メイ","メイさん","恋","","","","","","","","","","","","","","","","",""],
        ["","","メイ","メイちゃん","かのん","千砂都","きな子","","","","","","","","","","","","","","",""],
        ["","","メイ","メイメイ","可可","","","","","","","","","","","","","","","","",""],
        ["","","メイ","メイ","すみれ","四季","夏美","","","","","","","","","","","","","","",""],
        ["","","メイ","米女メイ","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","メイ","メイ先輩","冬毬","","","","","","","","","","","","","","","","",""],
        ["","","四季","四季さん","恋","","","","","","","","","","","","","","","","",""],
        ["","","四季","四季ちゃん","かのん","千砂都","きな子","","","","","","","","","","","","","","",""],
        ["","","四季","四季","すみれ","メイ","可可","夏美","","","","","","","","","","","","","",""],
        ["","","四季","若菜四季","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","四季","四季先輩","冬毬","","","","","","","","","","","","","","","","",""],
        ["","","夏美","夏美さん","恋","","","","","","","","","","","","","","","","",""],
        ["","","夏美","夏美ちゃん","かのん","千砂都","きな子","四季","","","","","","","","","","","","","",""],
        ["","","夏美","夏美","すみれ","メイ","可可","","","","","","","","","","","","","","",""],
        ["","","夏美","鬼塚夏美","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","夏美","お姉ちゃん","冬毬","","","","","","","","","","","","","","","","",""],
        ["","","ウィーン","マルガレーテちゃん","かのん","千砂都","きな子","四季","冬毬","","","","","","","","","","","","",""],
        ["","","ウィーン","マルガレーテ","可可","すみれ","メイ","夏美","","","","","","","","","","","","","",""],
        ["","","ウィーン","マルガレーテさん","恋","","","","","","","","","","","","","","","","",""],
        ["","","冬毬","冬毬ちゃん","かのん","千砂都","きな子","四季","","","","","","","","","","","","","",""],
        ["","","冬毬","フッユー","可可","","","","","","","","","","","","","","","","",""],
        ["","","冬毬","冬毬","すみれ","メイ","夏美","","","","","","","","","","","","","","",""],
        ["","","冬毬","冬毬さん","恋","","","","","","","","","","","","","","","","",""],
        ["","","冬毬","鬼塚冬毬","ウィーン","","","","","","","","","","","","","","","","",""],
        ["","","花帆","花帆さん","さやか","梢","","","","","","","","","","","","","","","",""],
        ["","","花帆","かほ","綴理","","","","","","","","","","","","","","","","",""],
        ["","","さやか","さやかちゃん","花帆","","","","","","","","","","","","","","","","",""],
        ["","","さやか","村野さん","梢","","","","","","","","","","","","","","","","",""],
        ["","","さやか","さや","綴理","","","","","","","","","","","","","","","","",""],
        ["","","梢","梢センパイ","花帆","","","","","","","","","","","","","","","","",""],
        ["","","梢","乙宗先輩","さやか","","","","","","","","","","","","","","","","",""],
        ["","","梢","こず","綴理","","","","","","","","","","","","","","","","",""],
        ["","","綴理","綴理センパイ","花帆","","","","","","","","","","","","","","","","",""],
        ["","","綴理","綴理","梢","","","","","","","","","","","","","","","","",""],
        ["","","綴理","綴理先輩","さやか","","","","","","","","","","","","","","","","",""],
        ["","","瑠璃乃","瑠璃乃ちゃん","花帆","","","","","","","","","","","","","","","","",""],
        ["","","瑠璃乃","瑠璃乃さん","梢","","","","","","","","","","","","","","","","",""],
        ["","","瑠璃乃","るり","綴理","","","","","","","","","","","","","","","","",""],
        ["","","瑠璃乃","るりちゃん","慈","","","","","","","","","","","","","","","","",""],
        ["","","慈","慈センパイ","花帆","","","","","","","","","","","","","","","","",""],
        ["","","慈","慈さん","梢","","","","","","","","","","","","","","","","",""],
        ["","","慈","めぐ","綴理","","","","","","","","","","","","","","","","",""],
        ["","","慈","めぐちゃん","瑠璃乃","","","","","","","","","","","","","","","","",""]
      ]
      
var s_txt_tmp = ""//入力一時
var s_txt_array = Array()//改行分離
var txt_array = Array()
var name_point = Array()//名前の文字数
var name_count_tmp_array = Array()
var only_name = Array()//重複なし
var name_sort_t = Array()
var name_sort = Array()
var name1 = ""//入れ替え対象１
var name2 = ""//入れ替え対象２
var name1_one = ""//入れ替え対象１
var name2_one = ""
var name1_two = ""//入れ替え対象１
var name2_two = ""
var name1_call = ""//呼ばれ方
var name2_call = ""//
var txt_len = 0//テキストの長さ
var name1_len = 0//名前長さ
var name2_len = 0
var re_cha_tmp = ""//置換一時文字列格納用
var re_cha_array = Array()
var re_cha_txt = ""
var txt_num = 0
var sea_tmp = 0
var read_point = 0

var img_obj = document.getElementById("img_view")
// var img_obj = document.images["img_view"]
// var img_obj = document.body.style.backgroundImage
var hw = document.getElementById("hw_change_button")
var music = new Audio()
// document.getElementById("view_txt").style.opacity = 0.5

//画僧選択
document.getElementById("img_read").addEventListener("change",function(e){
    var file = e.target.files[0]
    var bloburl = window.URL.createObjectURL(file)
    // document.getElementById("img_view").src = bloburl
    img_obj.src = bloburl
    // img_obj.style.cssText = "width:100%"
    img_obj.style.cssText = "height:100%"
    hw.value = "⇔"
})

//BGM選択
document.getElementById("bgm_read").addEventListener("change",function(e){
    var file = e.target.files[0]
    var bloburl = window.URL.createObjectURL(file)
    
    music.pause()

    //再生部分を記述
    music = new Audio(bloburl)
    music.play()
    music.loop = true
})

function hw_change(){
    if(hw.value = "⇔"){
        img_obj.style.cssText = "height:100%"
        hw.value = "⇕"
    }else if(hw.value != "⇕"){
        img_obj.style.cssText = "width:100%"
        hw.value = "⇔"
    }
}

function separate_txt(){

    //内容を改行で分離
    if(document.getElementById("view_txt").value != ""){
        s_txt_tmp = document.getElementById("view_txt").value
        s_txt_array = s_txt_tmp.split("\n")

        // document.getElementById("view_txt").value = s_txt_array[0]
        
        txt_array.push(s_txt_array[0])//0番
        if(s_txt_array.length > 1){//2行以上
            for(var i = 1; i < s_txt_array.length; i++){
                if(s_txt_array[i] != ""){//空欄以外抽出
                    txt_array.push(s_txt_array[i])
                }                
            }
        }

        document.getElementById("view_txt").readOnly = true
        document.getElementById("view_txt").style.cssText = "width:77%; height:20%; font-size: 200%; position: absolute; left: 9%; bottom: 2%; background-color: rgba(256,256,256,0.5);"

        document.getElementById("view_txt").value = txt_array[0]
        document.getElementById("s_button").remove()
        document.getElementById("re_cha_button").remove()

        document.getElementById("name1_textarea").remove()
        document.getElementById("name1_one_textarea").remove()
        document.getElementById("name1_two_textarea").remove()
        document.getElementById("name1_call_textarea").remove()

        document.getElementById("name2_textarea").remove()
        document.getElementById("name2_one_textarea").remove()
        document.getElementById("name2_two_textarea").remove()
        document.getElementById("name2_call_textarea").remove()
    }

}


function up_txt(){

    if(txt_num  > 0){
        txt_num -= 1
        document.getElementById("view_txt").value = txt_array[txt_num]
    }

}

function down_txt(){

    if(txt_num  < txt_array.length-1){
        txt_num += 1
        document.getElementById("view_txt").value = txt_array[txt_num]
    }
    
}


function re_cha(){

    //入れ替え実行
    if(document.getElementById("re_cha_button").value == "jΣﾐｲ˶º ᴗº˶ﾘ「逆もアリなのでは!!」"){

        // document.getElementById("view_txt").readOnly = true//手直しできなくなるので無効

        //初期化入れるか…？
        // document.getElementById("re_cha_button").remove()

        //置換処理
        name1 = document.getElementById("name1_textarea").value
        name2 = document.getElementById("name2_textarea").value
        name1_len = name1.length
        name2_len = name2.length

        name1_one = document.getElementById("name1_one_textarea").value
        name2_one = document.getElementById("name2_one_textarea").value

        name1_two = document.getElementById("name1_two_textarea").value
        name2_two = document.getElementById("name2_two_textarea").value

        name1_call = document.getElementById("name1_call_textarea").value
        name2_call = document.getElementById("name2_call_textarea").value
        
        re_cha_array = Array(s_txt_array.length)

        for(i=0;i<s_txt_array.length;i++){

            txt_len = s_txt_array[i].length
            read_point = 0
            re_cha_tmp = ""

            //最初だけ名前
            if(s_txt_array[i].substr(read_point,name1.length) == name1){//合致ワードあり
                re_cha_tmp = re_cha_tmp + name2
                read_point = read_point + name1.length
            }else if(s_txt_array[i].substr(read_point,name2.length) == name2){//合致ワードあり
                re_cha_tmp = re_cha_tmp + name1
                read_point = read_point + name2.length
            }else{//合致ワードなし　そのままテンポラリに1文字追加
                re_cha_tmp = re_cha_tmp + s_txt_array[i].substr(read_point,1)
                read_point += 1
            }

            //名前以外の呼称等
            // for(i=0;i<txt_len-1;i++){
            while(read_point<txt_len){
                
                if(s_txt_array[i].substr(read_point,name1_call.length) == name1_call){//合致ワードあり
                    re_cha_tmp = re_cha_tmp + name2_call
                    read_point = read_point + name1_call.length
                }else if(s_txt_array[i].substr(read_point,name2_call.length) == name2_call){//合致ワードあり
                    re_cha_tmp = re_cha_tmp + name1_call
                    read_point = read_point + name2_call.length
                }else if(s_txt_array[i].substr(read_point,name1_one.length) == name1_one){//合致ワードあり
                    re_cha_tmp = re_cha_tmp + name2_one
                    read_point = read_point + name1_one.length
                }else if(s_txt_array[i].substr(read_point,name2_one.length) == name2_one){//合致ワードあり
                    re_cha_tmp = re_cha_tmp + name1_one
                    read_point = read_point + name2_one.length
                }else if(s_txt_array[i].substr(read_point,name1_two.length) == name1_two){//合致ワードあり
                    re_cha_tmp = re_cha_tmp + name2_two
                    read_point = read_point + name1_two.length
                }else if(s_txt_array[i].substr(read_point,name2_two.length) == name2_two){//合致ワードあり
                    re_cha_tmp = re_cha_tmp + name1_two
                    read_point = read_point + name2_two.length
                }else{//合致ワードなし　そのままテンポラリに1文字追加
                    re_cha_tmp = re_cha_tmp + s_txt_array[i].substr(read_point,1)
                    read_point += 1
                }

            }
            
            //置換結果を配列に格納
            re_cha_array[i] = re_cha_tmp
            re_cha_txt = re_cha_txt + re_cha_tmp + "\n"

            // if(s_txt_array[0].substr(0,name1_len) == name1){
            //     re_cha_tmp = name2
            //     //開始位置を更新しつつ

            // }else if(s_txt_array[0].substr(0,name2_len) == name2){
            //     re_cha_tmp = name1

            // }else{
            //     re_cha_tmp = s_txt_array[0]
            // }

            // console.log(s_txt_array[0].substr(0,name1_len))
            // console.log(re_cha_tmp)
        }

        document.getElementById("view_txt").value = re_cha_txt
        document.getElementById("re_cha_button").value = "jΣﾐｲ˶º ᴗº˶ﾘ=3"
        document.getElementById("re_cha_button").style.cssText = "width: 20%; height: 5%; font-size: 100%; position: absolute; left: 9%; bottom: 74%;"

    }else{
        
        //前準備　改行で分離
        if(document.getElementById("view_txt").value != ""){
            s_txt_tmp = document.getElementById("view_txt").value
            s_txt_array = s_txt_tmp.split("\n")
        
            //名前のみ配列格納　カウント用
            for(i=0; i<s_txt_array.length; i++){

                // 「,『,（,"半角スペース"　のいずれかで判別
                name_point.push(s_txt_array[i].search("「|『|（| "))
                if(name_point[i] > 0){//名前（セリフ）がある
                    name_count_tmp_array.push(s_txt_array[i].substr(0,name_point[i]))
                }
            }

            //重複削除
            only_name = Array.from(new Set(name_count_tmp_array))
            //頻出
            var name_count = Array(only_name.length)
            for(i=0;i<only_name.length;i++){
                name_count[i] = 0
                for(j=0;j<name_count_tmp_array.length;j++){
                    if(only_name[i] == name_count_tmp_array[j]){
                        name_count[i] = name_count[i] + 1
                    }
                }
            }

            //転置前
            name_sort_t = [only_name,name_count]
            //転置後
            name_sort = name_sort_t[0].map((col,i) => name_sort_t.map(row => row[i]))

            //ソート
            name_sort.sort( (a,b) =>{
                return b[1] - a[1]
            })

            //名前　一人称　二人称　呼ばれ方
            //キャラ名
            document.getElementById("name1_textarea").value = name_sort[0][0]

            //一人称、二人称　データ参照
            for(i=1;i<cha_data.length-1;i++){
                if(cha_data[i][11] == name_sort[0][0]){
                    document.getElementById("name1_one_textarea").value = cha_data[i][8]
                    document.getElementById("name1_two_textarea").value = cha_data[i][9]
                }
            }

            //一人称　補正　複数→単一
            sea_tmp = document.getElementById("name1_one_textarea").value.search("、|,")
            if(sea_tmp != -1){
                document.getElementById("name1_one_textarea").value 
                 = document.getElementById("name1_one_textarea").value.substr(0,sea_tmp)
            }

            //二人称　補正　複数→単一
            sea_tmp = document.getElementById("name1_two_textarea").value.search("、|,")
            if(sea_tmp != -1){
                document.getElementById("name1_two_textarea").value 
                 = document.getElementById("name1_two_textarea").value.substr(0,sea_tmp)
            }

            //一人称　データなし暫定
            if(document.getElementById("name1_one_textarea").value == "" || 
                document.getElementById("name1_one_textarea").value == "ー"){
                document.getElementById("name1_one_textarea").value = "わたし"//暫定
            }

            //二人称　データなし暫定
            if(document.getElementById("name1_two_textarea").value == "" || 
                document.getElementById("name1_two_textarea").value == "ー"){
                document.getElementById("name1_two_textarea").value = "あなた"//暫定
            }
            
            // document.getElementById("name1_call_textarea").value  = name_sort[0][0]//暫定

            //呼ばれ方
            for(i=1;i<call_data.length;i++){
                if(call_data[i][2] == name_sort[0][0]){
                    for(j=0;j<call_data[0].length;j++){
                        if(call_data[i][j] == name_sort[1][0]){
                            document.getElementById("name1_call_textarea").value = call_data[i][3]
                        }
                    }
                }
            }

            if(document.getElementById("name1_call_textarea").value == "" || 
                document.getElementById("name1_call_textarea").value == "ー"){
                document.getElementById("name1_call_textarea").value = name_sort[0][0]//暫定
            }

            //---------------------------------------------------------------------------

            document.getElementById("name2_textarea").value = name_sort[1][0]

            for(i=1;i<cha_data.length-1;i++){
                if(cha_data[i][11] == name_sort[1][0]){
                    document.getElementById("name2_one_textarea").value = cha_data[i][8]
                    document.getElementById("name2_two_textarea").value = cha_data[i][9]
                }
            }
            
            sea_tmp = document.getElementById("name2_one_textarea").value.search("、|,")
            if(sea_tmp != -1){
                document.getElementById("name2_one_textarea").value 
                 = document.getElementById("name2_one_textarea").value.substr(0,sea_tmp)
            }

            sea_tmp = document.getElementById("name2_two_textarea").value.search("、|,")
            if(sea_tmp != -1){
                document.getElementById("name2_two_textarea").value 
                 = document.getElementById("name2_two_textarea").value.substr(0,sea_tmp)
            }

            if(document.getElementById("name2_one_textarea").value == "" || 
                document.getElementById("name2_one_textarea").value == "ー"){
                document.getElementById("name2_one_textarea").value = "わたし"//暫定
            }

            if(document.getElementById("name2_two_textarea").value == "" || 
                document.getElementById("name2_two_textarea").value == "ー"){
                document.getElementById("name2_two_textarea").value = "あなた"//暫定
            }

            // document.getElementById("name2_one_textarea").value = "わたし"//暫定
            // document.getElementById("name2_two_textarea").value = "あなた"//暫定
            // document.getElementById("name2_call_textarea").value  = name_sort[1][0]//暫定

            for(i=1;i<call_data.length;i++){
                if(call_data[i][2] == name_sort[1][0]){
                    for(j=0;j<call_data[0].length;j++){
                        if(call_data[i][j] == name_sort[0][0]){
                            document.getElementById("name2_call_textarea").value = call_data[i][3]
                        }
                    }
                }
            }

            if(document.getElementById("name2_call_textarea").value == "" || 
                document.getElementById("name2_call_textarea").value == "ー"){
                document.getElementById("name2_call_textarea").value = name_sort[1][0]//暫定
            }

            //console.log(only_name)
            // console.log(name_sort)
            //console.log(name_count_tmp_array)

            document.getElementById("re_cha_button").value = "jΣﾐｲ˶º ᴗº˶ﾘ「逆もアリなのでは!!」"
            document.getElementById("re_cha_button").style.cssText = "width: 55%; height: 10%; font-size: 200%; position: absolute; left: 9%; bottom: 74%;"
            //document.getElementById("view_txt").value = name_count_tmp_array[0] + only_name[1]

        }
    
    }//else 前準備

}


</script>